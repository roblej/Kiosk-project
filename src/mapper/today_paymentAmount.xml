<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="paymentAmount">

    <resultMap id="today2" type="vo.Order_itemVO">
        <id property="oi_idx" column="oi_idx"/>
        <result property="oi_quantity" column="oi_quantity"/>
        <result property="oi_price" column="oi_price"/>
    </resultMap>

    <resultMap id="today1" type="vo.OrderVO" >
        <id property="o_idx" column="o_idx" />
        <result property="o_number" column="o_number"/>
        <result property="o_total_amount" column="o_total_amount"/>
        <collection property="oiv" ofType="order_items_VO" resultMap="today2"/>
    </resultMap>

    <select id="today" resultMap="today1">
        SELECT * FROM orders od left join order_items oi on
        od.o_idx = oi.oi_idx
        where substring(o_number,1,6) = date_format(now(),"%y%m%d")
    </select>

</mapper>
        